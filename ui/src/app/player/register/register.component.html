<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Registro</title>
</head>
<body>
<div class="row">
  <h2 class="page-header title">
    Crear usuario jugador
  </h2>
</div>
<div>
  <form novalidate [formGroup]="formGroup" class="row" (ngSubmit)="addPlayer()">

    <div class="col-6">

      <fieldset>
        <div class="form-group"
             [ngClass]="{
                'has-danger': name.invalid && (name.dirty || name.touched),
                'has-success': name.valid && (name.dirty || name.touched)
               }">
          <label>Nombre</label>
          <input type="text"
                 class="form-control"
                 formControlName="name"
                 [(ngModel)]="newPlayer.name"
                 required>
          <div class="form-control-feedback"
               *ngIf="name.errors && (name.dirty || name.touched)">
            <p *ngIf="name.errors.required">Es requerido</p>
          </div>

        </div>
      </fieldset>

      <fieldset>
        <div class="form-group"
             [ngClass]="{
              'has-danger': username.invalid && (username.dirty || username.touched),
              'has-success': username.valid && (username.dirty || username.touched)
              }">
          <label>Usuario</label>
          <input type="text"
                 class="form-control"
                 formControlName="username"
                 [(ngModel)]="newPlayer.username"
                 required>
          <div class="form-control-feedback"
               *ngIf="username.errors && (username.dirty || username.touched)">
            <p *ngIf="username.errors.required">Es requerido</p>
          </div>
        </div>
      </fieldset>

      <fieldset>
        <div class="form-group"
             [ngClass]="{
              'has-danger': password.invalid && (password.dirty || password.touched),
              'has-success': password.valid && (password.dirty || password.touched)
            }">
          <label>Contrase√±a</label>
          <input type="password"
                 class="form-control"
                 formControlName="password"
                 [(ngModel)]="newPlayer.password"
                 required>
          <div class="form-control-feedback"
               *ngIf="password.errors && (password.dirty || password.touched)">
            <p *ngIf="password.errors.required">Es requerido</p>
            <p *ngIf="password.errors.minlength">Minimo de 8 caracteres</p>
          </div>
        </div>
      </fieldset>

    </div>

    <div class="col-6">

      <fieldset class="form-group"
                [ngClass]="{
              'has-danger': email.invalid && (email.dirty || email.touched),
              'has-success': email.valid && (email.dirty || email.touched)
             }">
        <label>Mail</label>
        <input type="email"
               class="form-control"
               formControlName="email"
               [(ngModel)]="newPlayer.mail"
               required>
        <div class="form-control-feedback"
             *ngIf="email.errors && (email.dirty || email.touched)">
          <p *ngIf="email.errors.required">Es requerido</p>
          <p *ngIf="email.errors.email">El mail no es valido</p>
        </div>

      </fieldset>

      <fieldset class="form-group"
                [ngClass]="{
              'has-danger': phone.invalid && (phone.dirty || phone.touched),
              'has-success': phone.valid && (phone.dirty || phone.touched)
             }">
        <label>Telefono de contacto</label>
        <input type="text"
               class="form-control"
               formControlName="phone"
               [(ngModel)]="newPlayer.phone"
        >
        <div class="form-control-feedback"
             *ngIf="phone.errors && (phone.dirty || phone.touched)">
        </div>
      </fieldset>

    </div>

    <div class="col-12">

      <div class="alert alert-danger text-center" *ngIf="addingPlayerError">
        <blockquote class="card-blockquote">
          <p>Error. {{errorMessage}}</p>
        </blockquote>
      </div>

      <div class="alert alert-success text-center" *ngIf="playerAdded">
        <p>El participante fue agregado correctamente.</p>
      </div>

      <div *ngIf="addingPlayer">
        <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>
        <span class="sr-only">Loading...</span>
      </div>

      <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="goBack()">Cancelar</button>
      <button type="submit" class="btn btn-outline-success pull-right" data-dismiss="modal" [disabled]="formGroup.invalid" *ngIf="!addingPlayer">Confirmar</button>

    </div>

  </form>
</div>



</body>
</html>
